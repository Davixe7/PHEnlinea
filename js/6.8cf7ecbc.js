(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"3e27":function(t,e,a){},ad07:function(t,e,a){"use strict";a("3e27")},b439:function(t,e,a){"use strict";a.r(e);a("e01a");var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"visits"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-4 q-px-md q-mb-md"},[e("report-form")],1),e("div",{staticClass:"col-12 col-md-8 q-px-md q-mb-md"},[e("reports-table",{on:{reportSelected:e=>{t.selectedReport=e,t.dialog=!0}}})],1),e("q-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.selectedReport?e("q-card",{staticStyle:{"min-width":"420px"},attrs:{flat:""}},[e("q-card-section",{staticClass:"report-dialog",attrs:{horizontal:""}},[e("q-card-section",[e("div",{staticClass:"title text-h6"},[t._v("\n              Cuerpo del reporte\n            ")]),e("div",{staticClass:"date"},[t._v("\n              "+t._s(t.selectedReport.created_at)+"\n            ")]),t._v("\n            "+t._s(t.selectedReport.description)+"\n          ")]),e("div",{staticClass:"col-5"},[t.selectedReport.pictures.length?e("q-img",{attrs:{src:t.selectedReport.pictures_url[0]}}):t._e()],1)],1)],1):t._e()],1)],1)])},n=[],i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"visit-form"}},[e("q-card",{attrs:{flat:"",bordered:""}},[e("q-card-section",[e("div",{staticClass:"text-h5 q-px-none"},[e("b",[t._v("Registrar Novedad")])])]),e("q-card-section",[e("q-input",{ref:"DescInput",staticClass:"q-mb-md",attrs:{outlined:"",type:"textarea",label:"Descripción",rules:[t=>""!=t||"La descripción es obligatoria, con minimo de 10 caracteres",t=>t.length>10||"La descripción debe contener minimo de 10 caracteres"]},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),e("q-file",{ref:"FileInput",staticClass:"q-mb-md",attrs:{outlined:"",multiple:"",label:"Adjuntar foto(s)"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"camera_alt"}})]},proxy:!0}]),model:{value:t.pictures,callback:function(e){t.pictures=e},expression:"pictures"}}),e("div",{staticClass:"text-right"},[e("q-btn",{staticClass:"bg-black text-white q-ml-auto",attrs:{dark:"",loading:t.loading},on:{click:t.storeNovelty}},[t._v("Guardar")])],1)],1)],1)],1)},r=[],l={data(){return{title:"",pictures:[],description:"",loading:!1}},methods:{storeNovelty(){if(!this.description||this.description.length<10)return;this.loading=!0;let t=new FormData;t.append("description",this.description),this.pictures.forEach(((e,a)=>{t.append(`picture${a+1}`,e)})),this.$store.dispatch("storeReport",t).then((t=>{this.description="",this.pictures=[],this.$refs.FileInput.value=""})).catch((t=>t)).then((t=>{this.loading=!1,this.$refs.DescInput.resetValidation()}))}}},o=l,c=a("2877"),d=a("f09f"),p=a("a370"),u=a("27f9"),h=a("7d53"),m=a("0016"),b=a("9c40"),f=a("eebe"),k=a.n(f),x=Object(c["a"])(o,i,r,!1,null,"7f9f4e06",null),q=x.exports;k()(x,"components",{QCard:d["a"],QCardSection:p["a"],QInput:u["a"],QFile:h["a"],QIcon:m["a"],QBtn:b["a"]});var g=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"reports-table"}},[t.loading?e("table-skeleton"):e("q-table",{attrs:{flat:"",bordered:"",title:"Novedades",columns:t.columns,data:t.reports},scopedSlots:t._u([{key:"top-right",fn:function(){return[e("q-input",{attrs:{dense:"",debounce:"300",placeholder:"Buscar"},scopedSlots:t._u([{key:"append",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"body-cell-read",fn:function(t){return[e("q-td",{attrs:{props:t}},[e("q-icon",{class:{"text-green":t.value},staticStyle:{"font-size":"1.5em"},attrs:{name:"done_all"}})],1)]}},{key:"body-cell-actions",fn:function(a){return[e("q-td",{attrs:{props:a}},[e("q-btn",{attrs:{flat:""}},[e("q-icon",{staticStyle:{"font-size":"1.5em"},attrs:{name:"remove_red_eye"},on:{click:function(e){return t.$emit("reportSelected",a.row)}}})],1)],1)]}}])})],1)},v=[],_=a("ff4b"),y={components:{TableSkeleton:_["a"]},name:"ReportsTable",computed:{reports(){return this.$store.state.reports.reports}},data(){return{loading:!0,search:"",columns:[{name:"date",field:"created_at",required:!0,label:"Fecha",align:"left",sortable:!0},{name:"excerpt",field:"excerpt",required:!0,label:"Resumen",align:"left"},{name:"read",field:"read",required:!0,label:"Leído",align:"left"},{name:"actions",field:"actions",required:!0,label:"Detalle",align:"right"}],visitas:[{apartment:"1001",name:"John F Doe",dni:"20345768",plate:"BGHKI8",arl:"1001",eps:"1001",arl_eps:"1001-1003",checkin:"2020-11-07 12:00:12",checkout:"2020-11-07 15:11:22"},{apartment:"1001",name:"John F Doe",dni:"20345768",plate:"BGHKI8",arl:"1001",eps:"1001",arl_eps:"1001-1003",checkin:"2020-11-07 12:00:12",checkout:"2020-11-07 15:11:22"},{apartment:"1001",name:"John F Doe",dni:"20345768",plate:"BGHKI8",arl:"1001",eps:"1001",arl_eps:"1001-1003",checkin:"2020-11-07 12:00:12",checkout:"2020-11-07 15:11:22"},{apartment:"1001",name:"John F Doe",dni:"20345768",plate:"BGHKI8",arl:"1001",eps:"1001",arl_eps:"1001-1003",checkin:"2020-11-07 12:00:12",checkout:"2020-11-07 15:11:22"},{apartment:"1001",name:"John F Doe",dni:"20345768",plate:"BGHKI8",arl:"1001",eps:"1001",arl_eps:"1001-1003",checkin:"2020-11-07 12:00:12",checkout:"2020-11-07 15:11:22"}]}},mounted(){this.$store.dispatch("fetchReports").then((t=>t)).catch((t=>t)).then((t=>{this.loading=!1}))}},C=y,w=a("eaac"),Q=a("db86"),I=Object(c["a"])(C,g,v,!1,null,"8eefb496",null),R=I.exports;k()(I,"components",{QTable:w["a"],QInput:u["a"],QIcon:m["a"],QTd:Q["a"],QBtn:b["a"]});var S={components:{ReportForm:q,ReportsTable:R},data(){return{dialog:!1,selectedReport:null}}},D=S,F=(a("ad07"),a("24e8")),B=a("068f"),J=Object(c["a"])(D,s,n,!1,null,"b4dad378",null);e["default"]=J.exports;k()(J,"components",{QDialog:F["a"],QCard:d["a"],QCardSection:p["a"],QImg:B["a"]})},ff4b:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"q-pa-md"},[e("q-markup-table",[e("thead",[e("tr",[e("th",{staticClass:"text-left",staticStyle:{width:"150px"}},[e("q-skeleton",{attrs:{animation:"blink",type:"text"}})],1),e("th",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text"}})],1),e("th",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text"}})],1),e("th",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text"}})],1),e("th",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text"}})],1),e("th",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text"}})],1)])]),e("tbody",t._l(5,(function(t){return e("tr",{key:t},[e("td",{staticClass:"text-left"},[e("q-skeleton",{attrs:{animation:"blink",type:"text",width:"85px"}})],1),e("td",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text",width:"50px"}})],1),e("td",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text",width:"35px"}})],1),e("td",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text",width:"65px"}})],1),e("td",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text",width:"25px"}})],1),e("td",{staticClass:"text-right"},[e("q-skeleton",{attrs:{animation:"blink",type:"text",width:"85px"}})],1)])})),0)])],1)},n=[],i={name:"TableSkeleton"},r=i,l=a("2877"),o=a("2bb1"),c=a("293e"),d=a("eebe"),p=a.n(d),u=Object(l["a"])(r,s,n,!1,null,"0de77220",null);e["a"]=u.exports;p()(u,"components",{QMarkupTable:o["a"],QSkeleton:c["a"]})}}]);